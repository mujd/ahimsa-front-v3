function hasElement(e){return document.body.contains(document.querySelector(e))}function getAfterEach(){for(var e=1;e<3;e++){var t=document.getElementById("foo-"+e);t.parentNode.removeChild(t)}for(var o=document.querySelectorAll(".custombox-content"),n=(e=0,o.length);e<n;e++)o[e].parentNode.removeChild(o[e]);var c=document.querySelectorAll(".custombox-overlay");for(e=0,n=c.length;e<n;e++)c[e].parentNode.removeChild(c[e]);var a=document.querySelectorAll(".custombox-loader");for(e=0,n=a.length;e<n;e++)a[e].parentNode.removeChild(a[e]);var u=document.querySelectorAll(".custombox-reference");for(e=0,n=u.length;e<n;e++)u[e].parentNode.removeChild(u[e])}describe("Custombox",function(){describe("Methods",function(){var e;beforeEach(function(){e=jasmine.DEFAULT_TIMEOUT_INTERVAL,jasmine.DEFAULT_TIMEOUT_INTERVAL=1e4}),beforeEach(function(){for(var e=1;e<3;e++){var t=document.createElement("div");t.innerHTML="Lorem ipmsum ("+e+") ...",t.setAttribute("id","foo-"+e),document.body.appendChild(t)}}),afterEach(function(){getAfterEach(),jasmine.DEFAULT_TIMEOUT_INTERVAL=e}),it("should have been initialized",function(e){new Custombox.modal({content:{effect:"fall",target:"#foo-1"}}),setTimeout(function(){expect(hasElement(".custombox-content")).toBe(!1),e()},200)}),it("should have opened",function(e){new Custombox.modal({content:{effect:"fall",target:"#foo-1"},overlay:{active:!1}}).open(),setTimeout(function(){expect(hasElement(".custombox-content")).toBe(!0),expect(hasElement(".custombox-open")).toBe(!0),expect(hasElement(".custombox-close")).toBe(!1),e()},200)}),it("should have closed",function(e){new Custombox.modal({content:{effect:"fall",target:"#foo-1",speedOut:0,speedIn:0},overlay:{active:!1}}).open(),setTimeout(function(){expect(hasElement(".custombox-open")).toBe(!0),expect(hasElement(".custombox-close")).toBe(!1),Custombox.modal.close(),expect(hasElement(".custombox-open")).toBe(!1),expect(hasElement(".custombox-close")).toBe(!0),e()},200)}),it("should have an exception when close",function(){expect(function(){return Custombox.modal.close()}).toThrowError("Custombox is not instantiated")}),it("should have closed by ID",function(e){var t="my-custom-id";new Custombox.modal({content:{effect:"fall",target:"#foo-1",id:t},overlay:{active:!1}}).open(),setTimeout(function(){expect(hasElement("#custombox-"+t)).toBe(!0),Custombox.modal.close(t),expect(hasElement(".custombox-close")).toBe(!0),e()},200)}),it("should have open two consecutive modals",function(e){for(var t=1;t<3;t++)new Custombox.modal({content:{effect:"fadein",target:"#foo-"+t}}).open();setTimeout(function(){expect(document.querySelectorAll(".custombox-content").length).toEqual(2),e()},200)}),it("should close all modals",function(e){for(var t=1;t<3;t++)new Custombox.modal({content:{effect:"fadein",target:"#foo-"+t},overlay:{active:!1}}).open();setTimeout(function(){expect(document.querySelectorAll(".custombox-close").length).toEqual(0),Custombox.modal.closeAll(),expect(document.querySelectorAll(".custombox-close").length).toEqual(2),e()},200)}),it("should close a modal with a click",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{active:!1}}).open(),setTimeout(function(){var e=new Event("click");document.querySelector(".custombox-content").dispatchEvent(e),expect(hasElement(".custombox-close")).toBe(!0),t()},200)})}),describe("Overlay",function(){var e;beforeEach(function(){e=jasmine.DEFAULT_TIMEOUT_INTERVAL,jasmine.DEFAULT_TIMEOUT_INTERVAL=1e4}),beforeEach(function(){for(var e=1;e<3;e++){var t=document.createElement("div");t.innerHTML="Lorem ipmsum ("+e+") ...",t.setAttribute("id","foo-"+e),document.body.appendChild(t)}}),afterEach(function(){getAfterEach(),jasmine.DEFAULT_TIMEOUT_INTERVAL=e}),it("should have put overlay color",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{color:"#F00"}}).open(),setTimeout(function(){expect(hasElement(".custombox-overlay")).toBe(!0);var e=document.querySelector(".custombox-overlay");expect(e.style.backgroundColor).toEqual("rgb(255, 0, 0)"),t()},200)}),it("should have put overlay opacity",function(o){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{opacity:1}}).open(),setTimeout(function(){var e=document.querySelector(".custombox-overlay"),t=window.getComputedStyle(e,null).getPropertyValue("opacity");t=t.replace(/,/g,"."),expect(Math.ceil(+t)).toEqual(1),o()},200)}),it("should have prevented don't close",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{close:!1}}).open(),setTimeout(function(){var e=new Event("click");document.querySelector(".custombox-overlay").dispatchEvent(e),expect(hasElement(".custombox-close")).toBe(!1),t()},200)}),it("should have close it with esc key",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open(),setTimeout(function(){var e=new Event("keydown");e.which=e.keyCode=27,document.dispatchEvent(e),expect(hasElement(".custombox-close")).toBe(!0),t()},200)}),it("should have not close it with esc key",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1",close:!1,clone:!0}}).open(),setTimeout(function(){var e=new Event("keydown");e.which=e.keyCode=27,document.dispatchEvent(e),setTimeout(function(){expect(hasElement(".custombox-close")).toBe(!1),t()},500)},200)}),it("should not close on clicking the background",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1",close:!1},overlay:{close:!1}}).open(),setTimeout(function(){document.querySelector(".custombox-overlay").click(),setTimeout(function(){expect(hasElement(".custombox-close")).toBe(!1),e()},500)},200)}),it("should have run the onOpen function",function(e){var t=!1;new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{onOpen:function(){return t=!0}}}).open(),setTimeout(function(){expect(t).toBe(!0),e()},200)}),it("should have run the onComplete function",function(e){var t=!1;new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{onComplete:function(){return t=!0}}}).open(),setTimeout(function(){expect(t).toBe(!0),e()},500)}),it("should have run the onClose function",function(e){var t=!1;new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{onClose:function(){return t=!0}}}).open(),setTimeout(function(){Custombox.modal.close()},500),setTimeout(function(){expect(t).toBe(!0),e()},1e3)}),it("should have opened without overlay",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},overlay:{active:!1}}).open(),setTimeout(function(){expect(hasElement(".custombox-overlay")).toBe(!1),e()},200)}),it("should be called a open listener",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open();var t=jasmine.createSpy("event");document.addEventListener("custombox:overlay:open",t),setTimeout(function(){expect(t).toHaveBeenCalled(),e()},200)}),it("should be called a complete listener",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open();var t=jasmine.createSpy("event");document.addEventListener("custombox:overlay:complete",t),setTimeout(function(){expect(t).toHaveBeenCalled(),e()},400)}),it("should be called a close listener",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open();var t=jasmine.createSpy("event");document.addEventListener("custombox:overlay:close",t),setTimeout(function(){Custombox.modal.close()},500),setTimeout(function(){expect(t).toHaveBeenCalled(),e()},1e3)})}),describe("Content",function(){var e;beforeEach(function(){e=jasmine.DEFAULT_TIMEOUT_INTERVAL,jasmine.DEFAULT_TIMEOUT_INTERVAL=1e4}),beforeEach(function(){for(var e=1;e<3;e++){var t=document.createElement("div");t.innerHTML="Lorem ipmsum ("+e+") ...",t.setAttribute("id","foo-"+e),t.style.display="none",document.body.appendChild(t)}}),beforeEach(function(){jasmine.Ajax.install()}),afterEach(function(){getAfterEach(),jasmine.DEFAULT_TIMEOUT_INTERVAL=e,jasmine.Ajax.uninstall()}),it("should have put content ID",function(e){var t="my-custom-id";new Custombox.modal({content:{effect:"fadein",target:"#foo-1",id:t}}).open(),setTimeout(function(){expect(hasElement("#custombox-"+t)).toBe(!0),e()},200)}),it("should open from AJAX",function(t){new Custombox.modal({content:{effect:"fadein",target:"foo.html"}}).open(),setTimeout(function(){jasmine.Ajax.requests.mostRecent().respondWith({status:200,contentType:"text/html",response:"<div>awesome content</div>"}),setTimeout(function(){expect(hasElement(".custombox-content")).toBe(!0);var e=document.querySelector(".custombox-content").textContent;expect(e).toEqual("awesome content"),t()},400)},200)}),it("should open from youtube",function(t){new Custombox.modal({content:{effect:"fadein",target:"https://youtu.be/clW7aV0vVAY"}}).open(),setTimeout(function(){expect(hasElement(".custombox-content iframe")).toBe(!0);var e=document.querySelector(".custombox-content iframe");expect(e.getAttribute("src")).toEqual("https://www.youtube.com/embed/clW7aV0vVAY"),t()},200)}),it("should open from youtube with a specific size",function(t){new Custombox.modal({content:{effect:"fadein",width:"600px",target:"https://youtu.be/clW7aV0vVAY"}}).open(),setTimeout(function(){var e=document.querySelector(".custombox-content > div");expect(e.offsetWidth).toEqual(600),expect(e.offsetHeight).toEqual(342),t()},200)}),it("should have animateFrom",function(e){new Custombox.modal({content:{effect:"slide",target:"#foo-1",animateFrom:"left"}}).open(),setTimeout(function(){expect(hasElement(".custombox-left")).toBe(!0),e()},200)}),it("should have animate animateTo",function(e){new Custombox.modal({content:{effect:"slide",target:"#foo-1",animateTo:"right"}}).open(),setTimeout(function(){Custombox.modal.close(),expect(hasElement(".custombox-right")).toBe(!0),e()},200)}),it("should have put width",function(t){new Custombox.modal({content:{effect:"slide",target:"#foo-1",width:"600px"}}).open(),setTimeout(function(){var e=document.querySelector(".custombox-content > div");expect(e.clientWidth).toEqual(600),t()},200)}),it("should have positionX and positionY",function(e){new Custombox.modal({content:{effect:"slide",target:"#foo-1",positionY:"center",positionX:"top"}}).open(),setTimeout(function(){expect(hasElement(".custombox-y-center")).toBe(!0),expect(hasElement(".custombox-x-top")).toBe(!0),e()},200)}),it("should have fullscreen",function(t){new Custombox.modal({content:{effect:"slide",target:"#foo-1",fullscreen:!0}}).open(),setTimeout(function(){var e=document.querySelector(".custombox-content").children[0];expect(hasElement(".custombox-fullscreen")).toBe(!0),expect(e.clientWidth).toEqual(window.innerWidth-16),expect(e.clientHeight).toEqual(window.innerHeight),t()},200)}),it("should have run the onOpen function",function(e){var t=!1;new Custombox.modal({content:{effect:"fadein",target:"#foo-1",onOpen:function(){return t=!0}}}).open(),setTimeout(function(){expect(t).toBe(!0),e()},200)}),it("should have run the onComplete function",function(e){var t=!1;new Custombox.modal({content:{effect:"fadein",target:"#foo-1",onComplete:function(){return t=!0}},overlay:{active:!1}}).open(),setTimeout(function(){expect(t).toBe(!0),e()},500)}),it("should have run the onClose function",function(e){var t=!1;new Custombox.modal({content:{effect:"fadein",target:"#foo-1",onClose:function(){return t=!0}}}).open(),setTimeout(function(){Custombox.modal.close()},500),setTimeout(function(){expect(t).toBe(!0),e()},1e3)}),it("should remove the property of display:none",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open(),setTimeout(function(){var e=document.querySelector(".custombox-content > div");expect(e.getAttribute("style")).toEqual("display: block;"),t()},200)}),it("should be called a open listener",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open();var t=jasmine.createSpy("event");document.addEventListener("custombox:content:open",t),setTimeout(function(){expect(t).toHaveBeenCalled(),e()},400)}),it("should be called a complete listener",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open();var t=jasmine.createSpy("event");document.addEventListener("custombox:content:complete",t),setTimeout(function(){expect(t).toHaveBeenCalled(),e()},500)}),it("should be called a close listener",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open();var t=jasmine.createSpy("event");document.addEventListener("custombox:content:close",t),setTimeout(function(){Custombox.modal.close()},500),setTimeout(function(){expect(t).toHaveBeenCalled(),e()},1e3)}),it("should remove perspective class",function(e){new Custombox.modal({content:{effect:"fall",target:"#foo-1"}}).open(),setTimeout(function(){expect(document.documentElement.classList.contains("custombox-perspective")).toBe(!0),Custombox.modal.close(),setTimeout(function(){expect(document.documentElement.classList.contains("custombox-perspective")).toBe(!1),e()},750)},500)})}),describe("Container",function(){var e;beforeEach(function(){e=jasmine.DEFAULT_TIMEOUT_INTERVAL,jasmine.DEFAULT_TIMEOUT_INTERVAL=1e4}),beforeEach(function(){for(var e=1;e<3;e++){var t=document.createElement("div");t.innerHTML="Lorem ipmsum ("+e+") ...",t.setAttribute("id","foo-"+e),document.body.appendChild(t)}var o=document.createElement("div");for(o.setAttribute("id","container");document.body.firstChild;)o.appendChild(document.body.firstChild);document.body.appendChild(o)}),beforeEach(function(){jasmine.Ajax.install()}),afterEach(function(){getAfterEach(),jasmine.DEFAULT_TIMEOUT_INTERVAL=e,jasmine.Ajax.uninstall()}),it("should have put a container selector",function(e){new Custombox.modal({content:{effect:"makeway",target:"#foo-1",container:"#container"}}).open(),setTimeout(function(){expect(hasElement("#container.custombox-container")).toBe(!0),e()},200)}),it("should have put a container automatically",function(e){new Custombox.modal({content:{effect:"makeway",target:"#foo-1"}}).open(),setTimeout(function(){expect(hasElement(".custombox-container")).toBe(!0),e()},200)}),it("should have overwrite an existing container automatically",function(e){new Custombox.modal({content:{effect:"makeway",target:"#foo-1"}}).open(),setTimeout(function(){new Custombox.modal({content:{effect:"blur",target:"#foo-2"}}).open()},200),setTimeout(function(){expect(document.querySelectorAll(".custombox-container").length).toBe(1),e()},400)}),it("should clone the element of the DOM",function(e){new Custombox.modal({content:{effect:"makeway",target:"#foo-1",clone:!1}}).open(),setTimeout(function(){expect(document.querySelectorAll(".custombox-reference").length).toBe(1),e()},400)})}),describe("Loader",function(){var e;beforeEach(function(){e=jasmine.DEFAULT_TIMEOUT_INTERVAL,jasmine.DEFAULT_TIMEOUT_INTERVAL=1e4}),beforeEach(function(){for(var e=1;e<3;e++){var t=document.createElement("div");t.innerHTML="Lorem ipmsum ("+e+") ...",t.setAttribute("id","foo-"+e),document.body.appendChild(t)}}),afterEach(function(){getAfterEach(),jasmine.DEFAULT_TIMEOUT_INTERVAL=e}),it("should show loader",function(t){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},loader:{color:"#F00",background:"#FFF",speed:1500}}).open(),setTimeout(function(){expect(hasElement(".custombox-loader")).toBe(!0);var e=document.querySelector(".custombox-loader");expect(e.style.borderColor).toEqual("rgb(255, 0, 0) rgb(255, 255, 255) rgb(255, 255, 255)"),expect(e.style.animationDuration).toEqual("1500ms"),t()},200)}),it("should show loader when the overlay is disabled",function(){new Custombox.modal({content:{effect:"fadein",target:"#foo-1",clone:!0},overlay:{active:!1},loader:{active:!0}}).open(),expect(hasElement(".custombox-loader")).toBe(!0)}),it("shouldn't show loader",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"},loader:{active:!1}}).open(),setTimeout(function(){expect(hasElement(".custombox-loader")).toBe(!1),e()},200)}),it("should remove loader when the overlay is completed",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1"}}).open(),setTimeout(function(){Custombox.modal.close(),expect(hasElement(".custombox-loader")).toBe(!1),e()},500)}),it("should remove loader when fail the target",function(e){new Custombox.modal({content:{effect:"fadein",target:"#foo-1-fail"}}).open(),setTimeout(function(){expect(hasElement(".custombox-loader")).toBe(!1),e()},500)})})});